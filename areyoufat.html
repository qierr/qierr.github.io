<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Are you fat?</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #f8f9fa;
    }
    #result, #foodSuggestion {
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container mt-5 mb-5 p-4 bg-white rounded shadow-sm">
    <h1 class="mb-4 text-center">Are you fat today?</h1>

    <div class="mb-3">
      <label for="gender" class="form-label">性别：</label>
      <select id="gender" class="form-select">
        <option value="male">男</option>
        <option value="female">女</option>
        <option value="mtf">男跨女(MTF)</option>
        <option value="ftm">女跨男(FTM)</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="weight" class="form-label">体重 (kg)：</label>
      <select id="weight" class="form-select"></select>
    </div>

    <div class="mb-3">
      <label for="height" class="form-label">净身高 (cm)：</label>
      <select id="height" class="form-select"></select>
    </div>

    <div class="mb-3">
      <label for="age" class="form-label">年龄：</label>
      <select id="age" class="form-select"></select>
    </div>

    <div class="mb-3">
      <label for="activity" class="form-label">请选择最符合你的每日活动情况：</label>
      <select id="activity" class="form-select">
        <option value="1.2">久坐不动（一整天几乎没动，只坐着）</option>
        <option value="1.375">轻度活动（偶尔走动，两点一线，无规律锻炼）</option>
        <option value="1.45">轻中度活动（每周运动/锻炼1-2次）</option>
        <option value="1.55">中度活动（每周运动/锻炼3-5次）</option>
        <option value="1.725">较高活动（几乎每天都运动/锻炼，或者从事体力劳动）</option>
        <option value="1.9">高强度活动（高强度体力劳动，或者运动员级别的运动强度）</option>
      </select>
    </div>

    <div class="text-center">
      <button onclick="calculateCalories()" class="btn btn-success">计算</button>
    </div>

    <div id="result" class="mt-4 text-center"></div>
    <div id="foodSuggestion" class="mt-3 text-center"></div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // 初始化下拉列表
    window.onload = function() {
      const weightSelect = document.getElementById("weight");
      const heightSelect = document.getElementById("height");
      const ageSelect = document.getElementById("age");

      for (let i = 30; i <= 150; i++) {
        weightSelect.innerHTML += `<option value="${i}" ${i === 60 ? 'selected' : ''}>${i} kg</option>`;
      }
      for (let i = 130; i <= 210; i++) {
        heightSelect.innerHTML += `<option value="${i}" ${i === 172 ? 'selected' : ''}>${i} cm</option>`;
      }
      for (let i = 1; i <= 100; i++) {
        ageSelect.innerHTML += `<option value="${i}" ${i === 19 ? 'selected' : ''}>${i}</option>`;
      }
    };

    function calculateCalories() {
      const gender = document.getElementById("gender").value;
      const weight = parseFloat(document.getElementById("weight").value);
      const height = parseFloat(document.getElementById("height").value);
      const age = parseInt(document.getElementById("age").value);
      const activity = parseFloat(document.getElementById("activity").value);

      if (isNaN(weight) || isNaN(height) || isNaN(age)) {
        document.getElementById("result").innerText = "请填写所有数值！";
        return;
      }

      let bmr = 0;
      if (gender === "male") {
        bmr = 10 * weight + 6.25 * height - 5 * age + 5;
      } else if (gender === "female") {
        bmr = 10 * weight + 6.25 * height - 5 * age - 161;
      } else if (gender === "mtf") {
        bmr = 10 * weight + 6.25 * height - 5 * age - 80;
      } else if (gender === "ftm") {
        bmr = 10 * weight + 6.25 * height - 5 * age - 60;
      }

      const totalCalories = bmr * activity;

      document.getElementById("result").innerText =
        `根据您的基础代谢率（BMR）与活动水平，您每天消耗大约 ${totalCalories.toFixed(2)} 千卡。`;

      const foods = [
        { name: "米饭（一碗）", calories: 250 }, { name: "包子（一个）", calories: 200 },
        { name: "小笼包（一个）", calories: 70 }, { name: "红烧肉（100克）", calories: 350 },
        { name: "奶茶（中杯）", calories: 400 }, { name: "披萨（一块）", calories: 280 },
        { name: "牛排（200克）", calories: 450 }, { name: "汉堡（标准）", calories: 500 },
        { name: "炸鸡腿（一个）", calories: 300 }, { name: "薯条（中份）", calories: 320 }
      ];

      const randomFood = foods[Math.floor(Math.random() * foods.length)];
      const maxAmount = Math.floor(totalCalories / randomFood.calories);

      const suggestion = `
        <h4>Will you be fat:</h4>
        <p>如果今天你吃（喝）<strong>${randomFood.name}</strong>，你最多可以吃（喝）<strong class="text-danger">${maxAmount}</strong> 份，不然你就会变胖！</p>
      `;
      document.getElementById("foodSuggestion").innerHTML = suggestion;
    }
  </script>
</body>
</html>
